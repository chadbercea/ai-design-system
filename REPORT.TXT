ðŸ§± Plan: Token Cleanup and Canonical Structuring

Objective:
Normalize a hybrid MUI-style JSON token set into a W3C-compliant, T-D-W-P-aligned, and Style Dictionary-ready formatâ€”fully consumable across Token Studio, GitHub, and downstream libraries.

â¸»

ðŸ”¨ Tasks
1.	Parse & Normalize
â€¢	Recursively flatten all token paths.
â€¢	Normalize key names to dot notation (e.g., blue.700, button.primary.hover).
â€¢	Detect and preserve references (e.g., {blue.700}).
2.	Validate
â€¢	Validate $value:
â€¢	Must be a valid 6- or 8-digit hex string, or rgba() string. Hex values with nonstandard suffixes (e.g. #ffffff0a) must be flagged or converted.
â€¢	If hex includes opacity suffixes (e.g. #00000014), convert to rgba() or flag.
â€¢	Validate $type:
â€¢	Must be in known W3C types: color, dimension, font, text, number.
â€¢	Validate references:
â€¢	Ensure all {foo.bar} references resolve to an existing key in the tree.
3.	Categorize
â€¢	âœ… Primitives â†’ Flattened tokens with static values (e.g., blue.900: "#0D47A1").
â€¢	âœ… Semantics â†’ Tokens that $value a reference to a primitive and conform to T-D-W-P.
â€¢	ðŸ›‘ Trash â†’ Tokens with:
â€¢	Broken or dangling references
â€¢	Malformed $value (e.g. #000000de)
â€¢	Naming violations (_states, white_states, etc.)
â€¢	Unsupported or ambiguous structure
4.	Export
â€¢	Output the following files:
â€¢	core.json â†’ Fully valid primitives
â€¢	theme.json â†’ Fully valid semantics
â€¢	trash.json â†’ Quarantined tokens with notes
â€¢	[warnings.md](http://warnings.md/) â†’ Human-readable issues list (dead refs, format issues, ambiguous structures)

- Reject keys using numeric names ("50", "1") unless remapped under a known type (color, spacing) and purpose-defined
- Flag duplicated or unscoped names ("main", "light") unless namespaced properly (e.g. palette.primary.main)

â¸»

âœ… Acceptance Criteria

| **ID** | **Updated Requirement** |
| --- | --- |
| **AC1** | All tokens in core.json must: have a valid $type, a $value that is a 6- or 8-digit hex string or valid rgba(), and must not be arrays |
| **AC2** | All tokens in theme.json must: $value a resolvable reference to a core.json token and follow a namespace that maps to a semantic function |
| **AC3** | trash.json must include: any token that is an array, has an unresolvable reference, contains an invalid or suffix-polluted hex, or uses unsupported naming patterns ("main", "light" without domain context) |
| **AC4** | Output files must validate in Token Studio and Style Dictionary, including naming format (dot notation), value types, and schema structure |
| **AC5** | Naming in all valid tokens must: follow the T-D-W-P model strictly; keys like color.50 must be remapped (e.g. color.gray.50) or flagged |
| **AC6** | warnings.md must: log all violations of naming, references, hex formatting, and structural misfits (e.g., arrays in place of objects) |
| **AC7** | No output token may include _states, _components, or _native unless explicitly remapped under valid token.$themes or token.components.* structure |